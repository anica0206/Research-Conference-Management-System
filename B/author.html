<!DOCTYPE html>
<html lang="en">
<head>
<title>Dashboard(Author)</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
.w3-top,.w3-bottom{position:absolute; width:100%;}
body,h1,h2,h3,h4,h5,h6 {font-family: "Lato", sans-serif}
.w3-bar,h1,button {font-family: "Montserrat", sans-serif}
.fa-anchor,.fa-coffee {font-size:200px}

th, td {
      border: 1px solid #444444;
  }
</style>
</head>
<body>

<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-teal w3-card w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-teal" href="javascript:void(0);" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
    <a id = "authorDashboard" class="w3-bar-item w3-padding-large w3-white">Dashboard</a>
    <a id="authorSubmitPaper" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Submit Paper</a>
    <a id="authorViewPaper" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">View Paper</a>
    <a id="authorSearchPaper" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Search Paper</a>
    <a id="authorUpdatePaper" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Update Paper</a>
    <a id="authorDeletePaper" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Delete Paper</a>
    <a id="authorViewReview" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">View Review</a>
    <a id="authorRateReview" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Rate Review</a>
    <a id= "logout" href="login.html" class="w3-bar-item-right w3-button w3-hide-small w3-padding-large w3-hover-white" style="color:black">
      <span> <img src="images/logoutIcon.png" width="16" class="logoutIcon"></span><b> Logout</b></a>
  </div>
</div>
  

  <!-- Navbar on small screens -->
  <div id="navDemo" class="w3-bar-block w3-white w3-hide w3-hide-large w3-hide-medium w3-large">
    <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 1</a>
    <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 2</a>
    <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 3</a>
    <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 4</a>
  </div>

<!-- DashBoard -->
<div id = "pg0">
  <header class="w3-container w3-teal w3-center" style="padding:128px 16px;background-image: url(images/authorbg.jpg); background-size: cover;">
    <h1 class="w3-margin w3-jumbo" style="color:black;"><b>Author</b></h1>
        <p class="w3-xlarge"></p>
        <button  id="authorCreatePaper1" class="w3-button w3-black w3-padding-large w3-large w3-margin-top">Submit Paper</button>
        
        <div id="myModal" class="modal" style ="color: black">
      </div>

      </header>
      
      <!-- First Grid -->
      <div class="w3-row-padding w3-padding-64 w3-container">
        <div class="w3-content">
          <div class="w3-twothird">
            <h2>Want to view or search for your Papers?</h2>
            <button  id="authorViewPaper1" class="w3-button w3-black w3-padding-large w3-large w3-margin-topModified boxShadow" >View</button>
            <button  id="authorSearchPaper1" class="w3-button w3-black w3-padding-large w3-large boxShadow" >Search</button>
      
            <p class="w3-text-grey w3-justify" style="padding-right:10%">We will show you all the papers that have been uploaded.
              You will be able see which paper have been submitted and can search for the paper you needed </p>
          </div>
      
          <div class="w3-third w3-center">
            <img src="images/file-picture-id696301002.jpg" width="150%" class="boxShadow" style="margin-left:10px"></i>
          </div>
        </div>
      </div>
      
      <!-- Second Grid -->
      <div class="w3-row-padding w3-light-grey w3-padding-64 w3-container">
        <div class="w3-content">
          <div class="w3-third w3-center">
            <img src="images/book1.jpg" width="150%" class="boxShadow" style="float: right"></i>
          </div>
      
          <div class="w3-twothird">
            <h6 style = "position: relative; left:80px; font-size: 30px; font-weight: 400;">Want to Update or delete your Papers?</h6>
            <button  id="authorUpdatePaper1" class="w3-button w3-black w3-padding-large w3-large w3-margin-topModified boxShadow" >Update</button>
            <button  id="authorDeletePaper1" class="w3-button w3-black w3-padding-large w3-large boxShadow" >Delete Paper</button>

            <p class="w3-text-grey" style = "position: relative; left:80px;">We will show you all the papers that have been uploaded.
              You will be able to make any amendment to the paper you uploaded or remove the papers from the system.</p>
          </div>
        </div>
      </div>
      
      
      <div class="w3-container w3-black w3-center w3-opacity w3-padding-64">
        <h1 class="w3-margin w3-xlarge">OPPA Co., Ltd</h1>
      </div>
</div>

<!-- Submit Paper -->
<div id = "pg1" style = "display: none">
  <header class="w3-container w3-red w3-center" style="padding:50px 16px;background-image: url(images/authorbg.jpg); background-size: cover;">
    <h1 class="w3-margin w3-jumbo" style = "color:black"><b>Submit Paper</b></h1>
   </header>   
         
  <div class="w3-light-grey">
    <div class="w3-content">
      <div class = "tempBox">
        <br>
        <form method="post" id="createPaperTEXTBOX" action="/B/createPaper">
          <input class="w3-animate-input" type="text" id="topic" name="topic" required="">
          <label alt="Paper Topic" placeholder="Paper Topic" style="font-family:Montserrat"></label>

          <h2><label for="message"><b>Paper: </b></label></h2>
          <textarea rows="15" cols="90" name="paper" form="createPaperTEXTBOX"> </textarea><br>

          <button type="submit" value = "Submit" class="buttonSpecial" style="--slist: red, #ccc" ><b>Submit Paper</b></button>
        </form>    
      </div>
    </div>
   </div>
  <div class="w3-container w3-black w3-center w3-opacity w3-padding-64">
    <h1 class="w3-margin w3-xlarge">OPPA Co., Ltd</h1>
  </div>
</div>

<!--View Paper-->
<div id = "pg2" style = "display: none">
  <header class="w3-container w3-teal w3-center" style="padding:50px 16px;background-image: url(images/authorbg.jpg); background-size: cover;">
    <h1 class="w3-margin w3-jumbo" style = "color : black"><b>View Paper</b></h1>
  </header>    
  
    <div class="">
      <div style="text-align:center">
        <table class = "author_table" id="view paperList">
          <tr>
            <th>ID</th>
            <th>Topic</th>
            <th>Contents</th>
            <th>Author ID</th>
            <th>Status</th>
          </tr>
        </table>          
      </div>
    </div>
</div>

<!--Search Paper -->
<div id = "pg3" style="display: none">
  <header class="w3-container w3-teal w3-center" style="padding:50px 16px;background-image: url(images/authorbg.jpg); background-size: cover;">
    <h1 class="w3-margin w3-jumbo" style = "color : black"><b>Search Paper</b></h1>
  </header>   
  <div class="w3-light-grey" style="text-align:center">
    <div class="tempBox">
      <div class="search">  
        <br>
          <input id="searchPaperId" type="number" name="pId" required="">
          <label alt="Paper ID" placeholder="Paper ID" style="font-family:Montserrat"></label>       
          <button type="submit" onclick="SearchPaper()" class="buttonSpecial" style="--slist: red, #ccc"><b>Search Paper</b></button>
      </div>
    </div>
  </div>
  <table id="search paperList" class = "author_table">
    <tr>
      <th>ID</th>
      <th>Topic</th>
      <th>Contents</th>
      <th>Author ID</th>
      <th>Status</th>
    </tr>
  </table>
</div>

<!--Update Paper-->
<div id = "pg4" style = "display: none">
  <header class="w3-container w3-teal w3-center" style="padding:50px 16px;background-image: url(images/authorbg.jpg); background-size: cover;">
    <h1 class="w3-margin w3-jumbo" style = "color : black"><b>Update Paper</b></h1>
    </header>    
    <form method="post" action="/B/authorUpdateMyPaper">
      <div class="w3-light-grey">
        <div class="w3-content">
          <div class="tempBox">
            <div class="search"><br>
              <input class="w3-animate-input" id="paperid" type="number" name="paperid" required="">
              <label alt="PaperID" placeholder="PaperID" style="font-family:Montserrat"></label>
              <h2><label for="message"><b>Paper: </b></label></h2>
              <input type ="text " class = "message" name="paper" id="paper"></label><br>

              <button type="submit" class="buttonSpecial" style="--slist: red, #ccc"><b>Update Paper</b></button>
            </div>
          </div>
        </div>
      </div>
    </form>
  <div class="w3-container w3-black w3-center w3-opacity w3-padding-64">
    <h1 class="w3-margin w3-xlarge">OPPA Co., Ltd</h1>
  </div>
</div>

<!--Delete Paper-->
<div id = "pg5" style = "display: none">
  <header class="w3-container w3-teal w3-center" style="padding:50px 16px;background-image: url(images/authorbg.jpg); background-size: cover;">
    <h1 class="w3-margin w3-jumbo" style = "color : black"><b>Delete Paper</b></h1>
  </header>    
      
  <form method="post" action="/B/deleteMyPaper">
    <div class="w3-light-grey" style="text-align:center">
      <div class="tempBox">
        <div class="search"><br>
          <input class="w3-animate-input" id="deletepaperid" type="number" name="paperid" required="">
          <label alt="Paper ID" placeholder="Paper ID" style="font-family:Montserrat"></label>
          <button type="submit" class="buttonSpecial" style="--slist: red, #ccc"><b>Delete Paper</b></button>
        </div>
      </div>
    </div>
  </form>
</div>

<!--View Review-->
<div id = "pg6" style = "display: none">
  <header class="w3-container w3-teal w3-center" style="padding:50px 16px;background-image: url(images/authorbg.jpg); background-size: cover;">
    <h1 class="w3-margin w3-jumbo" style = "color : black"><b>View Review</b></h1>
  </header>    
      
    <div class="w3-light-grey" style="text-align:center">
      <div class="tempBox">
        <div class="search"><br>
            <input class="w3-animate-input" id="viewReviewId" type="number" name="paperid" required="">
            <label alt="Paper ID" placeholder="Paper ID" style="font-family:Montserrat"></label>
            <button onclick="ViewReview()" type="submit" class="buttonSpecial" style="--slist: red, #ccc"><b>View Review</b></button>
        </div>
      </div>
      <div class="">
        <div style="text-align:center">
          <table class = "author_table" id="view reviewList">
            <tr>
              <th>ID</th>
              <th>User ID</th>
              <th>Paper ID</th>
              <th>Rating</th>
              <th>Contents</th>
              <th>Author Rating</th>
            </tr>
          </table>
        </div>
      </div>
    </div>
</div>

<!--Rate Review-->
<div id = "pg7" style = "display: none">
  <header class="w3-container w3-teal w3-center" style="padding:50px 16px;background-image: url(images/authorbg.jpg); background-size: cover;">
    <h1 class="w3-margin w3-jumbo" style = "color : black"><b>Rate Review</b></h1>
  </header>    
      
  <form method="post" action="/B/rateOnReview">
    <div class="w3-light-grey" style="text-align:center">
      <div class="tempBox">
        <div class="search"><br>
          <input class="w3-animate-input" id="reviewid" type="number" name="reviewid" required="">
          <label alt="Rewiew ID" placeholder="Rewiew ID" style="font-family:Montserrat"></label>
          <input class="w3-animate-input" id="pid" type="number" name="pid" required="">
          <label alt="Paper ID" placeholder="Paper ID" style="font-family:Montserrat"></label>
          <label for="" class="selectLabel" style="font-family:Montserrat;">Rating</label>
          <select class="selectSpecial" name="rating" id="rating" required="">
            <option value="0" selected disabled hidden></option>
            <option value=-3>-3</option>
            <option value=-2>-2</option>
            <option value=-1>-1</option>
            <option value=0>0</option>
            <option value=1>1</option>
            <option value=2>2</option>
            <option value=3>3</option>
          </select>
          <button type="submit" class="buttonSpecial" style="--slist: red, #ccc"><b>Rate Review</b></button>
        </div>
      </div>
    </div>
  </form>
</div>

<script>
  document
      .getElementById("logout")
      .addEventListener("click", function () {
          fetch("/B/logout", {
              method: "get",
          })
      });
      
  //function to change page
  function ChangeEffect(func) {
    const navInfo = [
      "authorDashboard",
      "authorSubmitPaper",
      "authorViewPaper",
      "authorSearchPaper",
      "authorUpdatePaper",
      "authorDeletePaper",
      "authorViewReview",
      "authorRateReview" 
    ];

    document.getElementById(func).classList.add("w3-white");

    for (const e in navInfo) {
      if (navInfo[e] == func) {
        document.getElementById(`pg${e}`).style.display =
            "block";
        continue;
      }
      document.getElementById(navInfo[e]).classList.remove("w3-white")
      document.getElementById(`pg${e}`).style.display = "none";
    }
  }

  document
    .getElementById("authorDashboard")
    .addEventListener("click", function () {
        ChangeEffect("authorDashboard");
    });

  document
    .getElementById("authorSubmitPaper")
    .addEventListener("click", function () {
        ChangeEffect("authorSubmitPaper");
    });

  document
    .getElementById("authorViewPaper")
    .addEventListener("click", function () {
      fetch("/B/viewPaper", {
      method: "GET",
      })
          .then(response =>{ 
                  return response.json();                               
              })
          .then (data =>
          {   
            if(data == "")
                alert("Paper not found");
            else
            {
              ViewPaper(data);
            }
          });
        ChangeEffect("authorViewPaper");
    });

    function ViewPaper(data) {

      var tbl = document.getElementById("view paperList"); // Get the table
      for(var i = 1;i<tbl.rows.length;)
      {
          tbl.deleteRow(i);
      }

      const infoList = ["ID", "topic", "paper", "aId", "status"];

      for (const element of data) {
          const row = tbl.insertRow();
          for (const e of infoList) {
              const cell = row.insertCell();
              cell.innerText = element[e];
          }
      }
    }

  document
    .getElementById("authorUpdatePaper")
    .addEventListener("click", function () {
        ChangeEffect("authorUpdatePaper");
    });

document
    .getElementById("authorDeletePaper")
    .addEventListener("click", function () {
        ChangeEffect("authorDeletePaper");
    });

document
    .getElementById("authorViewReview")
    .addEventListener("click", function () {
        ChangeEffect("authorViewReview");
    });    

function ViewReview()
{
  const pId = document.getElementById("viewReviewId").value;

  fetch("/B/viewReviewOnPaper", {  
            method : "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                pId: pId
            }),             
        })
          .then(response =>{ 
                  return response.json();                               
              })
          .then (data =>
          {   
            if(data == "")
                alert("Wrong paper id");
            else
            {
              var tbl = document.getElementById("view reviewList"); // Get the table
              for(var i = 1;i<tbl.rows.length;){
                  tbl.deleteRow(i);
              }
              const infoList = ["ID", "uId", "pId", "rating", "content", "aRating"];

              for (const element of data) {
                  const row = tbl.insertRow();
                  for (const e of infoList) {
                      const cell = row.insertCell();
                      cell.innerText = element[e];
                  }
              }
            }
          });
}

document
    .getElementById("authorRateReview")
    .addEventListener("click", function () {
        ChangeEffect("authorRateReview");
    });    

document
    .getElementById("authorSearchPaper")
    .addEventListener("click", function () {
        ChangeEffect("authorSearchPaper");
    });    

    function SearchPaper()
    {
      const pId = document.getElementById("searchPaperId").value;

          fetch("/B/searchMyPaper", {  
            method : "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                pId: pId
            }),               
        })
          .then(response =>{ 
                  return response.json();                               
              })
          .then (data =>
          {   
            if(data == "")
                alert("Enter proper paper id");
            else
            {
              var tbl = document.getElementById("search paperList"); // Get the table
              for(var i = 1;i<tbl.rows.length;){
                  tbl.deleteRow(i);
              }

              const infoList = ["ID", "topic", "paper", "aId", "status"];

                for (const element of data) {
                    const row = tbl.insertRow();
                    for (const e of infoList) {
                        const cell = row.insertCell();
                        cell.innerText = element[e];
                    }
                }
            }
          });
    }
  
  //dashboard mini-button
  document
    .getElementById("authorCreatePaper1")
    .addEventListener("click", function () {
        ChangeEffect("authorSubmitPaper");
    });

  document
    .getElementById("authorViewPaper1")
    .addEventListener("click", function () {
        ChangeEffect("authorViewPaper");
    });

    document
    .getElementById("authorSearchPaper1")
    .addEventListener("click", function () {
        ChangeEffect("authorSearchPaper");
    });    

    document
    .getElementById("authorUpdatePaper1")
    .addEventListener("click", function () {
        ChangeEffect("authorUpdatePaper");
    });

    document
    .getElementById("authorDeletePaper1")
    .addEventListener("click", function () {
        ChangeEffect("authorDeletePaper");
    });

// Used to toggle the menu on small screens when clicking on the menu button
function myFunction() {
  var x = document.getElementById("navDemo");
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else { 
    x.className = x.className.replace(" w3-show", "");
  }
}
// Get the modal
var modal = document.getElementById("myModal");

// Get the button that opens the modal
var allocateBtn = document.getElementById("allocateBtn");
allocateBtn.onclick = function() {
    modal.style.display = "block";
}
// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];
// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}
var manualBtn = document.getElementById("manualBtn");
// When the user clicks the button, open the modal 
manualBtn.onclick = function(){
    alert("Please select papers until the quantity fits the max numbers of papers that the reviewer required")

}



</script>
</body>
</html>
